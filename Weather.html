<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Cloud Function Example</title>
</head>
<body>

    <h1>Google Cloud Function Example</h1>

    <button onclick="callCloudFunction()">Run Cloud Function</button>

    <div id="output"></div>

    <script>
        function callCloudFunction() {
            const cloudFunctionUrl = 'https://us-central1-weatherapi-414217.cloudfunctions.net/avdata_get'; 
        
            fetch(cloudFunctionUrl)
                .then(response => response.json())
                .then(data => {
                    const outputDiv = document.getElementById('output');
                    outputDiv.innerHTML = ''; // Clear previous output
        
                    for (const entry of data) {
                        // Create elements for each data point
                        const airportHeading = document.createElement('h3');
                        const metarElement = document.createElement('p');
                        const tafElement = document.createElement('p');
        
                        // Set text content
                        airportHeading.textContent = entry.icaoId;
                        metarElement.textContent = "METAR: " + entry.rawOb;
                        tafElement.textContent = "TAF: " + entry.rawTaf;
        
                        // Append elements to the output div
                        outputDiv.appendChild(airportHeading);
                        outputDiv.appendChild(metarElement);
                        outputDiv.appendChild(tafElement);
                    }
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    document.getElementById('output').innerText = 'Error fetching data'; 
                });
            }

    </script>

</body>
</html>
